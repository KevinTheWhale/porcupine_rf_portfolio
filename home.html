{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Porcupine RF & Microwave Innovations</title>

    <!-- Futuristic Font for nav + heavy condensed for brand -->
    <link href="https://fonts.googleapis.com/css2?family=Saira+Condensed:wght@600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-image: url("/media/site_backgrounds/website_background4.png");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: white;
        }

        .top-bar {
            display: flex;
            align-items: center;
            padding: 30px;
            gap: 15px;
        }

        /* The brand SVG spans the space between logo mark (left) and nav (right) */
        .brand-banner {
            flex: 1;
            height: 84px;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-left: auto;
        }

        .nav-buttons a {
            padding: 10px 20px;
            border-radius: 9999px;
            background-color: #333;
            color: white;
            text-decoration: none;
            border: 2px solid transparent;
            transition: color 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;
        }

        .nav-buttons a:hover {
            border: 1px solid skyblue;
            box-shadow: 0 0 8px skyblue;
        }

        .nav-buttons a span {
            font-family: 'Saira Condensed', sans-serif;
        }

        .nav-buttons a:hover span,
        .nav-buttons a.active span {
            color: skyblue;
            text-decoration: underline;
            text-underline-offset: 6px;
        }

        /* ECG styling */
        .wave-trail { stroke: url(#pulseGradient); stroke-width: 2.8; fill: none; }
        .wave-stroke { stroke: skyblue; stroke-width: 2.8; fill: none; stroke-dasharray: 2200; stroke-dashoffset: 2200; animation: waveDraw 3.5s linear infinite; }

        @keyframes waveDraw {
            0%   { stroke-dashoffset: 2200; opacity: 0; }
            10%  { opacity: 1; }
            80%  { stroke-dashoffset: 0; opacity: 1; }
            100% { opacity: 0; }
        }

        /* Make the SVG text link obviously clickable */
        .svg-link {
            cursor: pointer;
        }

        /* Main layout below the banner */
        .main-section {
            display: flex;
            justify-content: space-between;
            gap: 40px;
            padding: 40px;
        }

        /* Left panel background where the image rests on */ 
        .main-left {
            flex: 1;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .main-left img {
            width: 100%;
            max-width: 550px;
            border-radius: 10px;
            height: auto;
        }

        .main-right {
            flex: 1;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }

        .mission-vision-panel {
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            max-height: 100%;
        }

        .mission-vision-inner {
            width: 100%;
            max-width: 100%;
        }

        .updates-title {
            font-size: 22px;
            margin-bottom: 20px;
            border-bottom: 1px solid skyblue;
            padding-bottom: 10px;
        }

        .update-entry {
            margin-bottom: 40px;
            font-size: 22px;
        }

        .update-entry h3 {
            margin-bottom: 5px;
            font-size: 18px;
            color: skyblue;
        }

        .update-entry time {
            font-size: 13px;
            color: #ccc;
        }

        .update-entry p {
            margin-top: 5px;
            line-height: 1.5;
            white-space: pre-line;
        }

        /* Bottom row container: 4 equal columns, responsive */
        /* 4-up row stays consistent */
        .bottom-section{
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 24px;
            padding: 40px;
            margin: 0 40px;
        }

        /* Card shell */
        .bottom-item{
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 14px;
            padding: 18px 16px 20px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* Uniform image frame */
        .bottom-image{
            width: 100%;
            height: 190px;          /* controls image consistency */
            border-radius: 14px;
            overflow: hidden;
            background: rgba(0,0,0,0.35);
        }

        .bottom-image img{
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Title: centered, consistent height */
        .bottom-caption {
    margin-top: 12px;
    text-align: center;          /* <-- Centers the title text */
    font-weight: 700;
    font-size: 18px;
    line-height: 1.2;
    min-height: 2.4em;
}

        /* Description: centered, clamped to keep cards equal */
        .bottom-desc{
            margin-top: 10px;
            padding-left: 4px;

            text-align: left;
            font-size: 14px;
            line-height: 1.5;
            opacity: 0.95;

            flex: 1;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 6;
            overflow: hidden;
        }

        /* Responsive tweak: stack on narrower screens */
        @media (max-width: 1100px) {
            .bottom-section { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 600px) {
            .bottom-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="top-bar">

        <!-- ONE continuous logo+ECG animation -->
        <svg class="brand-banner" viewBox="0 0 1040 84" preserveAspectRatio="none">
            <defs>
                <linearGradient id="pulseGradient" x1="0" y1="0" x2="1040" y2="0">
                    <stop offset="0%"   stop-color="skyblue" stop-opacity="0.12"/>
                    <stop offset="50%"  stop-color="skyblue" stop-opacity="0.55"/>
                    <stop offset="100%" stop-color="skyblue" stop-opacity="0.12"/>
                </linearGradient>
            </defs>

            <!-- Larger clickable brand -->
            <a href="/" class="svg-link" aria-label="Go to homepage">
                <text x="45" y="43" fill="white"
                      font-family="Saira Condensed, sans-serif"
                      font-weight="800" font-size="61">Porcupine</text>
            </a>

            <!-- Subtitle stretched so "Inc." ends at the end of the second square wave -->
            <text x="45" y="70" fill="#cfe8ff"
                  font-family="Arial, sans-serif" font-size="14"
                  lengthAdjust="spacingAndGlyphs" textLength="320">
                RF &amp; Microwave Innovations Inc.
            </text>

            <!-- Continuous path: flat underline -> two square waves (peaks at y=6) -> flowing ECG -->
            <!-- Baseline: y=50 -->
            <path id="fullPath" class="wave-trail" d="
                M0 50 L300 50
                L300 6 L324 6 L324 50
                L344 50
                L344 6 L368 6 L368 50
                L438 50
                C450 50, 462 50, 474 50
                C476 30, 482 22, 488 50
                C492 68, 496 56, 500 50
                C514 50, 530 50, 546 50
                C548 34, 554 26, 560 50
                C564 70, 568 54, 572 50
                C586 50, 602 50, 618 50
                C620 38, 626 28, 632 50
                C636 66, 640 56, 644 50
                C658 50, 674 50, 690 50
                C692 36, 698 24, 704 50
                C708 66, 712 56, 716 50
                C730 50, 746 50, 762 50
                C764 34, 770 26, 776 50
                C780 68, 784 58, 788 50
                C802 50, 818 50, 834 50
                C836 36, 842 28, 848 50
                C852 68, 856 56, 860 50
                C876 50, 896 50, 1280 50" />

            <path class="wave-stroke" d="
                M0 50 L300 50
                L300 6 L324 6 L324 50
                L344 50
                L344 6 L368 6 L368 50
                L438 50
                C450 50, 462 50, 474 50
                C476 30, 482 22, 488 50
                C492 68, 496 56, 500 50
                C514 50, 530 50, 546 50
                C548 34, 554 26, 560 50
                C564 70, 568 54, 572 50
                C586 50, 602 50, 618 50
                C620 38, 626 28, 632 50
                C636 66, 640 56, 644 50
                C658 50, 674 50, 690 50
                C692 36, 698 24, 704 50
                C708 66, 712 56, 716 50
                C730 50, 746 50, 762 50
                C764 34, 770 26, 776 50
                C780 68, 784 58, 788 50
                C802 50, 818 50, 834 50
                C836 36, 842 28, 848 50
                C852 68, 856 56, 860 50
                C876 50, 896 50, 1280 50" />
        </svg>

        <div class="nav-buttons">
            <a href="{% url 'about' %}" class="{% if request.resolver_match.url_name == 'about' %}active{% endif %}">
                <span>About</span>
            </a>
            <a href="{% url 'product_list' %}" class="{% if '/products/' in request.path %}active{% endif %}">
                <span>Products</span>
            </a>
            <a href="/support/" class="{% if request.path == '/support/' %}active{% endif %}">
                <span>Sale/Support</span>
            </a>
        </div>
    </div>

    <div class="main-section">
        <div class="main-left">
            {% if homepage_image %}
                <img src="{{ homepage_image.image.url }}" alt="{{ homepage_image.title }}">
            {% else %}
                <p>No image uploaded yet.</p>
            {% endif %}
        </div>
    
        <div class="main-right mission-vision-panel">
            <div class="mission-vision-inner">
                <div class="updates-title">Our Mission</div>
                {% if home_description and home_description.body %}
                    <div class="update-entry">
                        <p>{{ home_description.body|linebreaks }}</p>
                    </div>
                {% else %}
                    <p>No mission statement yet.</p>
                {% endif %}
    
                <div class="updates-title" style="margin-top: 30px;">Our Vision</div>
                {% if vision_statement and vision_statement.body %}
                    <div class="update-entry">
                        <p>{{ vision_statement.body|linebreaks }}</p>
                    </div>
                {% else %}
                    <p>No vision statement yet.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="bottom-section">

        {% if bottom_images.left_image %}
          <div class="bottom-item">
            <div class="bottom-image">
              <img src="{{ bottom_images.left_image.url }}"
                   alt="{{ bottom_images.left_caption|default:'Left image' }}">
            </div>
      
            {% if bottom_images.left_caption %}
              <div class="bottom-caption">{{ bottom_images.left_caption }}</div>
            {% endif %}
      
            {% if bottom_images.left_description %}
              <div class="bottom-desc" style="font-size: {{ bottom_images.left_font_px|default:14 }}px;">
                {{ bottom_images.left_description|linebreaksbr }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      
        {% if bottom_images.middle_image %}
          <div class="bottom-item">
            <div class="bottom-image">
              <img src="{{ bottom_images.middle_image.url }}"
                   alt="{{ bottom_images.middle_caption|default:'Middle image' }}">
            </div>
      
            {% if bottom_images.middle_caption %}
              <div class="bottom-caption">{{ bottom_images.middle_caption }}</div>
            {% endif %}
      
            {% if bottom_images.middle_description %}
              <div class="bottom-desc" style="font-size: {{ bottom_images.middle_font_px|default:14 }}px;">
                {{ bottom_images.middle_description|linebreaksbr }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      
        {% if bottom_images.right_image %}
          <div class="bottom-item">
            <div class="bottom-image">
              <img src="{{ bottom_images.right_image.url }}"
                   alt="{{ bottom_images.right_caption|default:'Right image' }}">
            </div>
      
            {% if bottom_images.right_caption %}
              <div class="bottom-caption">{{ bottom_images.right_caption }}</div>
            {% endif %}
      
            {% if bottom_images.right_description %}
              <div class="bottom-desc" style="font-size: {{ bottom_images.right_font_px|default:14 }}px;">
                {{ bottom_images.right_description|linebreaksbr }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      
        {% if bottom_images.extra_image %}
          <div class="bottom-item">
            <div class="bottom-image">
              <img src="{{ bottom_images.extra_image.url }}"
                   alt="{{ bottom_images.extra_caption|default:'Extra image' }}">
            </div>
      
            {% if bottom_images.extra_caption %}
              <div class="bottom-caption">{{ bottom_images.extra_caption }}</div>
            {% endif %}
      
            {% if bottom_images.extra_description %}
              <div class="bottom-desc" style="font-size: {{ bottom_images.extra_font_px|default:14 }}px;">
                {{ bottom_images.extra_description|linebreaksbr }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      
      </div>

    {% include 'catalog/footer.html' %}
</body>
</html>